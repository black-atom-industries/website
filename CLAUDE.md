# CLAUDE.md

This file provides guidance to Claude Code (claude.ai/code) when working with code in this repository.

## Project Overview

This is the Black Atom Industries website built with TanStack Start (full-stack React framework), React 19, CSS Modules, Open Props, and Class Variance Authority (CVA) for styling.

## Key Commands

### Development
- `npm run dev` - Start development server on port 3000
- `npm run build` - Build for production
- `npm run serve` - Preview production build

### Code Quality
- `npm run check` - Run Biome linting and formatting checks
- `npm run lint` - Lint only
- `npm run format` - Format only

### Testing
- `npm test` - Run all tests (Vitest)

## Architecture

### Routing & Framework

This project uses **TanStack Start** with file-based routing:

- **Route files**: Located in `src/routes/`
- **Root layout**: `src/routes/__root.tsx` contains the document shell, global layout, and TanStack devtools
- **Route generation**: TanStack automatically generates `src/routeTree.gen.ts` - DO NOT edit this file manually
- **Router creation**: `src/router.tsx` exports `getRouter()` factory function
- **Navigation**: Use `Link` component from `@tanstack/react-router` for SPA navigation

When adding new routes, simply create `.tsx` files in `src/routes/` and TanStack will handle the rest.

### Styling System

The styling system is built on three key technologies:

1. **CSS Modules** - Component-scoped styling
   - Each component has an accompanying `.module.css` file
   - Imported as `styles` object: `import styles from './Component.module.css'`
   - Applied via `className={styles.className}`

2. **Open Props** - Design system foundation
   - Global imports in `src/styles.css`
   - Provides CSS custom properties for consistent design tokens
   - Use tokens like `var(--font-old-style)`, `var(--size-1)`, etc.
   - Built-in dark/light theme support

3. **Class Variance Authority (CVA)** - Variant-based component styling
   - Imported as `cva` package: `import { cva } from "cva"`
   - Use for components with multiple style variants
   - Combines well with CSS Modules for type-safe variant management

**Example component pattern:**
```tsx
import styles from './Button.module.css'
import { cva } from 'cva'

const buttonVariants = cva(styles.button, {
  variants: {
    variant: {
      primary: styles.primary,
      secondary: styles.secondary,
    }
  }
})
```

### Component Structure

- **Components**: `src/components/` contains reusable UI components
- **Pattern**: Functional components with CSS Modules
- **Naming**: Component files use PascalCase, CSS Module files match component name

Example structure:
```
src/components/Header.tsx
src/components/Header.module.css
```

### Path Aliases

TypeScript path aliases are configured:
- `@/*` maps to `src/*`
- Example: `import Header from '@/components/Header'`

## Configuration Files

### TypeScript (`tsconfig.json`)
- **Target**: ES2022
- **Strict mode**: Enabled with additional linting rules
- **Module resolution**: Bundler mode
- **JSX**: react-jsx (React 19)

### Biome (`biome.json`)
- **Formatter**: Tabs for indentation, double quotes
- **Linter**: Recommended rules enabled
- **Scope**: Only formats/lints files in `src/`, excludes generated files (`routeTree.gen.ts`, `styles.css`)
- **Import organization**: Automatically sorts imports

### Vite (`vite.config.ts`)
Plugins used:
1. `viteTsConfigPaths` - Enables TypeScript path aliases
2. `tanstackStart` - TanStack Start framework plugin
3. `nitroV2Plugin` - Server-side rendering with Nitro
4. `viteReact` - React fast refresh and JSX transform

## Development Notes

### Generated Files
Never edit these files manually:
- `src/routeTree.gen.ts` - Auto-generated by TanStack Router

### Adding New Features

**New Route**: Create `src/routes/your-route.tsx` with:
```tsx
import { createFileRoute } from '@tanstack/react-router'

export const Route = createFileRoute('/your-route')({
  component: YourComponent,
})

function YourComponent() {
  return <div>Content</div>
}
```

**New Component with Styling**:
1. Create `src/components/YourComponent.tsx`
2. Create `src/components/YourComponent.module.css`
3. Use Open Props tokens in CSS for consistency
4. Use CVA for variant management if component has multiple variants

### Relationship to Black Atom Industries Ecosystem

This website is part of the larger Black Atom Industries organization. The themes referenced in this project come from the `core` repository which serves as the single source of truth for all theme definitions. See `.claude/CLAUDE.md` for complete organization documentation.
